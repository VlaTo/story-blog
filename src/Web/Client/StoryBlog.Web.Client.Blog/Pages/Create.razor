@page "/create"

@using StoryBlog.Web.Client.Blog.Store
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<MudText Typo=@Typo.h6>Create</MudText>

@if (StoreState.Success == Post.Value.StoreState)
{
    <MudText Typo=@Typo.h6>New post was created</MudText>
}
else
{
    <EditForm Model=@Model OnValidSubmit=@OnSubmitForm OnInvalidSubmit=@OnInvalidForm>
        <DataAnnotationsValidator/>
        <MudCard>
            <MudCardContent>
                <MudTextField
                    Label="Title"
                    HelperText="Blog title"
                    @bind-Value=@Model.Title
                    For=@(() => Model.Title)
                    Variant=@Variant.Outlined/>
                <MudTextField
                    @ref=slugComponent
                    Label="Slug"
                    HelperText="Blog slug"
                    @bind-Value=@Model.Slug
                    For=@(() => Model.Slug)
                    Variant=@Variant.Outlined
                    Adornment=@Adornment.End
                    AdornmentIcon=@Icons.Material.Filled.Refresh
                    OnAdornmentClick=@OnGenerateSlug/>
                <MudMarkdown Value=@Model.Text/>
            </MudCardContent>
            <MudCardActions>
                <MudButton ButtonType=@ButtonType.Submit Variant=@Variant.Filled Color=@Color.Primary>Send</MudButton>
            </MudCardActions>
        </MudCard>
    </EditForm>
}